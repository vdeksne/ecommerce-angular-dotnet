import{a as q,b as z}from"./chunk-LDEEPC7Y.js";import{a as M}from"./chunk-7NWEC2S5.js";import{b as B}from"./chunk-FBVB2KKT.js";import{A as w,C as f,D as O,E as g,F as N,I as _,K as J,L as I,M as R,O as D,Q as b,S as T,T as $,W as G}from"./chunk-G5T46W7U.js";import{h as k,ia as E,j as F}from"./chunk-XAZAGRYG.js";import"./chunk-JGYM447R.js";import{Cb as h,Db as A,Fb as V,Gb as P,Hb as i,Ib as r,Jb as u,Qb as C,Sb as S,Vb as L,ac as l,bc as y,cb as m,cc as j,db as U,ic as d,ka as s,oa as c,vb as x,xb as p}from"./chunk-XJECHS7E.js";var Q=(()=>{let t=class t{constructor(){this.fb=s(D),this.accountService=s(B),this.router=s(F),this.activatedRoute=s(k),this.returnUrl="/shop",this.loginForm=this.fb.group({email:[""],password:[""]});let o=this.activatedRoute.snapshot.queryParams.returnUrl;o&&(this.returnUrl=o)}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["app-login"]],standalone:!0,features:[d],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","Password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(n,a){n&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return a.onSubmit()}),i(2,"div",2)(3,"h1",3),l(4,"Login"),r()(),i(5,"mat-form-field",4)(6,"mat-label"),l(7,"Email address"),r(),u(8,"input",5),r(),i(9,"mat-form-field",4)(10,"mat-label"),l(11,"Password"),r(),u(12,"input",6),r(),i(13,"button",7),l(14,"Sign in"),r()()()),n&2&&(m(),p("formGroup",a.loginForm))},dependencies:[b,_,w,g,N,I,R,M,G,q,T,E]});let e=t;return e})();function Z(e,t){if(e&1&&(i(0,"mat-error"),l(1),r()),e&2){let v=S();m(),j("",v.label," is required")}}function tt(e,t){e&1&&(i(0,"mat-error"),l(1,"Email is invalid"),r())}var W=(()=>{let t=class t{constructor(o){this.controlDir=o,this.label="",this.type="text",this.controlDir.valueAccessor=this}writeValue(o){}registerOnChange(o){}registerOnTouched(o){}get control(){return this.controlDir.control}};t.\u0275fac=function(n){return new(n||t)(U(O,2))},t.\u0275cmp=c({type:t,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[d],decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(n,a){n&1&&(i(0,"mat-form-field",0)(1,"mat-label"),l(2),r(),u(3,"input",1),x(4,Z,2,1,"mat-error")(5,tt,2,0,"mat-error"),r()),n&2&&(m(2),y(a.label),m(),L("type",a.type),L("placeholder",a.label),p("formControl",a.control),m(),h(a.control.hasError("required")?4:-1),m(),h(a.control.hasError("email")?5:-1))},dependencies:[b,w,g,J,G,q,$,T]});let e=t;return e})();function et(e,t){if(e&1&&(i(0,"li"),l(1),r()),e&2){let v=t.$implicit;m(),y(v)}}function rt(e,t){if(e&1&&(i(0,"div",8)(1,"ul",10),V(2,et,2,1,"li",null,A),r()()),e&2){let v=S();m(2),P(v.validationErrors)}}var X=(()=>{let t=class t{constructor(){this.fb=s(D),this.accountService=s(B),this.router=s(F),this.snack=s(z),this.registerForm=this.fb.group({firstName:["",f.required],lastName:["",f.required],email:["",[f.required,f.email]],password:["",f.required]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:o=>this.validationErrors=o})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=c({type:t,selectors:[["app-register"]],standalone:!0,features:[d],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName"],["label","Last name","formControlName","lastName"],["label","Email address","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(n,a){n&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return a.onSubmit()}),i(2,"div",2)(3,"h1",3),l(4,"Register"),r()(),u(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),x(9,rt,4,0,"div",8),i(10,"button",9),l(11,"Register"),r()()()),n&2&&(m(),p("formGroup",a.registerForm),m(8),h(a.validationErrors?9:-1),m(),p("disabled",a.registerForm.invalid))},dependencies:[b,_,g,N,I,R,M,E,W]});let e=t;return e})();var It=[{path:"login",component:Q},{path:"register",component:X}];export{It as accountRoutes};
